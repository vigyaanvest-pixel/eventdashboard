<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Events Radar — Public</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div class="topbar">
      <h1>Events Radar <span class="muted">— next 2 weeks</span></h1>
      <div class="toolbar">
        <button id="viewTable" class="btn small" aria-pressed="true" title="Table view">Table</button>
        <button id="viewCards" class="btn small" aria-pressed="false" title="Cards view">Cards</button>
        <button id="toggleDark" class="btn small" title="Toggle dark mode">Dark</button>
      </div>
    </div>
    <div class="controls">
      <label>From <input type="date" id="fromDate"></label>
      <label>To <input type="date" id="toDate"></label>
      <label>Symbols <input type="text" id="symbols" placeholder="e.g., QS, COIN"></label>
      <label>Types
        <select id="types" multiple>
          <option>Company</option>
          <option>Policy / Legislation</option>
          <option>Regulatory</option>
          <option>Macro</option>
          <option>Sector Conf</option>
          <option>Industry Print</option>
          <option>Market Micro</option>
        </select>
      </label>
      <button id="preset14" class="btn">Next 14 days</button>
      <button id="clearFilters" class="btn ghost">Clear</button>
      <button id="exportCsv" class="btn">Export CSV</button>
    </div>

    <div id="summaryBar" class="summary sticky">
      <div id="summaryCounts"></div>
      <div id="nextEvent"></div>
    </div>
  </header>

  <div id="status" class="status" hidden></div>

  <main>
    <div id="tableWrap" class="tableWrap">
      <table id="eventsTable">
        <thead>
          <tr>
            <th data-key="date">Date (ET)</th>
            <th data-key="symbol">Symbol</th>
            <th data-key="type">Type</th>
            <th data-key="domain">Domain</th>
            <th data-key="stage">Stage</th>
            <th data-key="name">Event</th>
            <th data-key="why">Why it matters</th>
            <th>ICS</th>
            <th>Source</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="cardsWrap" class="cardsWrap" hidden></div>

    <p class="hint">Tip: keep table text concise; click a row for notes.</p>
  </main>

  <footer>
    <span>Static public site. Replace <code>eventbundle.js</code> daily. Brand color can be set via <code>?brand=%23hex</code>.</span>
  </footer>

  <!-- Robust bundle loader with cache-busting + status messages -->
  <script>
    (function(){
      var s = document.createElement('script');
      s.src = 'eventbundle.js?v=' + Date.now();
      s.async = false;
      s.onload = function(){ window.__BUNDLE_OK__ = true; };
      s.onerror = function(){
        var st = document.getElementById('status');
        st.hidden = false;
        st.textContent = 'Failed to load eventbundle.js — ensure it is next to index.html.';
      };
      document.head.appendChild(s);
    })();
  </script>
  <script src="app.js" defer></script>
</body>
</html>
